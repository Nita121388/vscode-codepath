# Code Path Marker - Visual Code Execution Path Marker

<div align="center">

[![è¯­è¨€](https://img.shields.io/badge/è¯­è¨€-ä¸­æ–‡-red)](#ä¸­æ–‡)
[![Language](https://img.shields.io/badge/Language-English-blue)](#english)
[![Docs](https://img.shields.io/badge/Docs-Multi--Language-green)](docs/index.html)

**[ğŸ“– ä¸­æ–‡æ–‡æ¡£](#ä¸­æ–‡) | [ğŸ“– English Documentation](#english) | [ğŸŒ Interactive Docs](docs/index.html)**

---

</div>

## ä¸­æ–‡

### ğŸ’¡ è§£å†³çš„é—®é¢˜

åœ¨é˜…è¯»å¤æ‚ä»£ç æ—¶ï¼Œä½ æ˜¯å¦é‡åˆ°è¿‡è¿™äº›å›°æ‰°ï¼Ÿ

- ğŸ“‚ **ä»£ç ä¸Šä¸‹æ–‡æ•£ä¹±**ï¼šä¸€ä¸ªåŠŸèƒ½çš„å®ç°åˆ†æ•£åœ¨å¤šä¸ªæ–‡ä»¶ä¸­ï¼Œéœ€è¦ä¸æ–­è·³è½¬æ‰èƒ½ç†è§£å®Œæ•´æµç¨‹
- ğŸ” **æ‰§è¡Œè·¯å¾„ä¸æ¸…æ™°**ï¼šè°ƒè¯•æ—¶æƒ³çŸ¥é“"è¿™ä¸ªå‡½æ•°æ˜¯ä»å“ªé‡Œè°ƒç”¨çš„"ï¼Œå´éœ€è¦å…¨å±€æœç´¢ã€åå¤è·³è½¬
- ğŸ“ **éš¾ä»¥è®°å½•å’Œåˆ†äº«**ï¼šæƒ³ç»™åŒäº‹è§£é‡Šä¸€æ®µå¤æ‚é€»è¾‘ï¼Œåªèƒ½æˆªå›¾+æ–‡å­—æè¿°ï¼Œæ•ˆç‡ä½ä¸‹
- ğŸ”„ **ä»£ç é‡æ„åä¸¢å¤±ä¸Šä¸‹æ–‡**ï¼šé‡æ„åä¹‹å‰è®°å½•çš„ä½ç½®å¤±æ•ˆï¼Œéœ€è¦é‡æ–°å¯»æ‰¾

**Code Path Marker è®©ä½ åƒ"æ‰“ä¹¦ç­¾"ä¸€æ ·æ ‡è®°ä»£ç è·¯å¾„**ï¼š

âœ… éšæ—¶é€‰æ‹©ä»»æ„**ä»£ç ç‰‡æ®µã€æ–‡ä»¶ã€æ–‡ä»¶å¤¹**æ ‡è®°ä¸ºèŠ‚ç‚¹
âœ… é€šè¿‡ **Parentï¼ˆçˆ¶èŠ‚ç‚¹ï¼‰ã€Childï¼ˆå­èŠ‚ç‚¹ï¼‰ã€Broï¼ˆå…„å¼ŸèŠ‚ç‚¹ï¼‰** ç»„ç»‡ä»£ç æ‰§è¡Œå…³ç³»
âœ… ç”¨**å¯è§†åŒ–æ ‘å½¢è§†å›¾**ç›´è§‚å±•ç¤ºå®Œæ•´æ‰§è¡Œæµç¨‹
âœ… **è‡ªåŠ¨è¿½è¸ªä»£ç ä½ç½®**ï¼Œé‡æ„åæ™ºèƒ½æ›´æ–°èŠ‚ç‚¹ä½ç½®
âœ… **å¯¼å‡º/å¯¼å…¥**åŠŸèƒ½ï¼Œè½»æ¾ä¸å›¢é˜Ÿåˆ†äº«ä»£ç è·¯å¾„

> å°†æ•£è½åœ¨ä»£ç ä¸­çš„æ‰§è¡Œä¸Šä¸‹æ–‡ç»Ÿä¸€åˆ°ä¸€ä¸ªè§†å›¾ï¼Œè®©ä»£ç é˜…è¯»å’Œè°ƒè¯•å˜å¾—é«˜æ•ˆç›´è§‚ã€‚

**æ³¨æ„**ï¼šæ’ä»¶å½“å‰ä»å¤„äºæµ‹è¯•é˜¶æ®µï¼ŒåŠŸèƒ½æ¥å£ã€æ–‡æ¡£ã€æ•°æ®ç»“æ„å¯èƒ½ä¼šé¢‘ç¹è°ƒæ•´ï¼Œæ¬¢è¿åé¦ˆä½“éªŒé—®é¢˜ä¸æ”¹è¿›å»ºè®®ã€‚

<p align="center">
  <img src="docs/assets/demos.png" alt="Code Path Marker ä½¿ç”¨æ¼”ç¤º" width="720">
</p>

### ğŸš€ å¿«é€Ÿå¼€å§‹

#### ğŸ“¦ å®‰è£…

1. **ä» VS Code æ’ä»¶å¸‚åœº**ï¼ˆæ¨èï¼‰ï¼š
   - æ‰“å¼€ VS Code
   - è¿›å…¥æ‰©å±•é¢æ¿ï¼ˆCtrl+Shift+X / Cmd+Shift+Xï¼‰
   - æœç´¢ "Code Path Marker"
   - ç‚¹å‡» **å®‰è£…**

2. **ä»å‘½ä»¤è¡Œå®‰è£…**ï¼š
   ```bash
   code --install-extension Nita.codepath-extension
   ```

#### ğŸ“Œ å®é™…åœºæ™¯ç¤ºä¾‹

**åœºæ™¯ï¼šç†æ¸…ä¸€ä¸ª HTTP è¯·æ±‚å¤„ç†æµç¨‹**

```typescript
// src/routes/userRoutes.ts
router.post('/api/users', createUser);  // ğŸ‘ˆ 1. é€‰ä¸­è¿™è¡Œï¼Œå³é”®æ ‡è®°ä¸º"æ–°æ ¹èŠ‚ç‚¹"

// src/controllers/userController.ts
export async function createUser(req, res) {  // ğŸ‘ˆ 2. é€‰ä¸­å‡½æ•°åï¼Œæ ‡è®°ä¸º"å­èŠ‚ç‚¹"
  const userData = await validateUserData(req.body);
  const user = await userService.createUser(userData);  // ğŸ‘ˆ 3. é€‰ä¸­è¿™è¡Œï¼Œæ ‡è®°ä¸º"å­èŠ‚ç‚¹"
  res.json(user);
}

// src/services/userService.ts
export async function createUser(data) {  // ğŸ‘ˆ 4. é€‰ä¸­å‡½æ•°åï¼Œæ ‡è®°ä¸º"å­èŠ‚ç‚¹"
  const hashedPassword = await hashPassword(data.password);  // ğŸ‘ˆ 5. é€‰ä¸­è°ƒç”¨ï¼Œæ ‡è®°ä¸º"å­èŠ‚ç‚¹"
  return await db.users.create({ ...data, password: hashedPassword });
}

// src/utils/crypto.ts
export async function hashPassword(password) {  // ğŸ‘ˆ 6. é€‰ä¸­å‡½æ•°å®šä¹‰ï¼Œæ ‡è®°ä¸º"å­èŠ‚ç‚¹"
  return bcrypt.hash(password, 10);
}
```

**ç”Ÿæˆçš„å¯è§†åŒ–è·¯å¾„ï¼š**
```
ğŸŒ² [Graph] ç”¨æˆ·æ³¨å†Œæµç¨‹
â”œâ”€ ğŸ“ POST /api/users (userRoutes.ts:15)
   â””â”€ ğŸ“ createUser æ§åˆ¶å™¨ (userController.ts:23)
      â””â”€ ğŸ“ createUser æœåŠ¡ (userService.ts:45)
         â””â”€ ğŸ“ hashPassword åŠ å¯† (crypto.ts:12)
            â””â”€ ğŸ“ bcrypt.hash è°ƒç”¨ (crypto.ts:13)
```

**æ•ˆæœ**ï¼šä»è·¯ç”± â†’ æ§åˆ¶å™¨ â†’ æœåŠ¡ â†’ å·¥å…·å‡½æ•°çš„å®Œæ•´è°ƒç”¨é“¾ä¸€ç›®äº†ç„¶ï¼

#### âš¡ å¿«é€Ÿæ“ä½œ

1. **é€‰æ‹©ä»£ç ** â†’ åœ¨ç¼–è¾‘å™¨ä¸­é«˜äº®ä»»æ„ä»£ç ç‰‡æ®µ
2. **å³é”®èœå•** â†’ é€‰æ‹© "Code Path" â†’ "Mark as New Node"
3. **æ„å»ºè·¯å¾„** â†’ ç»§ç»­æ ‡è®°å…¶ä»–ä»£ç ï¼Œé€‰æ‹© Parent/Child/Bro å»ºç«‹å…³ç³»
4. **æŸ¥çœ‹è§†å›¾** â†’ ç‚¹å‡»çŠ¶æ€æ çš„ Code Path å›¾æ ‡ï¼ŒæŸ¥çœ‹å®Œæ•´è·¯å¾„æ ‘

### ğŸ“– æ–‡æ¡£

- **[ğŸ“š ç”¨æˆ·æŒ‡å—](docs/README-ZH.md)** - å®Œæ•´ä½¿ç”¨è¯´æ˜
- **[ğŸ› ï¸ å¼€å‘æŒ‡å—](docs/CONTRIBUTING-ZH.md)** - å¼€å‘å’Œè´¡çŒ®æŒ‡å—
- **[ğŸ“‹ API å‚è€ƒ](docs/API-ZH.md)** - æŠ€æœ¯ API æ–‡æ¡£
- **[ğŸ”§ é…ç½®è¯´æ˜](docs/CONFIGURATION-ZH.md)** - è®¾ç½®å’Œè‡ªå®šä¹‰
- **[ğŸŒ äº¤äº’å¼æ–‡æ¡£](docs/index.html)** - å¤šè¯­è¨€æ–‡æ¡£é—¨æˆ·
- **[ğŸ“ å­¦ä¹ æŒ‡å—](docs/LEARNING-GUIDE.md)** - åˆå­¦è€…æ·±åº¦æŒ‡å—

### âš¡ æ ¸å¿ƒåŠŸèƒ½

- **äº¤äº’å¼èŠ‚ç‚¹æ ‡è®°** - ç»Ÿä¸€"Code Path"å­èœå•å¿«é€Ÿæ ‡è®°èŠ‚ç‚¹
- **æ–‡æœ¬å¯è§†åŒ–** - å®æ—¶åˆ·æ–°ã€åˆ†å±‚å±•ç¤ºçš„æ ‘å½¢è§†å›¾
- **å¤šå›¾è¡¨ç®¡ç†** - çŠ¶æ€æ å¿«æ·èœå•å¿«é€Ÿè®¿é—®
- **è¡Œå†…å®¹ç¼–è¾‘å¼¹çª—** - é€‰ä¸­ä»£ç åé€šè¿‡ç¯æ³¡èœå•æˆ–å³é”®èœå•æ‰“å¼€è‡ªåŠ¨æ¢è¡Œçš„ç¼–è¾‘å¼¹çª—ï¼Œæ”¯æŒå¤šè¡Œç¼–è¾‘å¹¶ä¿ç•™åŸå§‹è¡Œå·
- **æ™ºèƒ½å¯¼èˆª** - æ¨¡ç³ŠåŒ¹é…å’Œä½ç½®è¿½è¸ª
- **è‡ªåŠ¨ä½ç½®æ›´æ–°** - æ™ºèƒ½ä»£ç è¿½è¸ªï¼Œå¤šç­–ç•¥æœç´¢
- **æ ‘åˆ†å‰æ”¯æŒ** - è¿½è¸ªåŒä¸€ä»£ç çš„å¤šæ¡æ‰§è¡Œè·¯å¾„
- **å¯¼å‡º/å¯¼å…¥** - å›¢é˜Ÿåä½œåˆ†äº«ï¼Œè‡ªåŠ¨åˆ‡æ¢
- **èŠ‚ç‚¹ç¼–è¾‘** - å®æ—¶éªŒè¯å’Œé¢„è§ˆæ›´æ–°
- **æ–‡ä»¶æµè§ˆå™¨é›†æˆ** - æ ‡è®°æ–‡ä»¶/æ–‡ä»¶å¤¹ä¸ºèŠ‚ç‚¹ï¼Œç›´æ¥é¢„è§ˆå’Œåˆ†äº«å›¾è¡¨æ–‡ä»¶
- **èŠ‚ç‚¹æ“ä½œ** - å¤åˆ¶ã€ç²˜è´´ã€å‰ªåˆ‡ã€ä¸Šç§»ã€ä¸‹ç§»ï¼Œè‡ªå®šä¹‰é¢„è§ˆèœå•
- **ä»£ç ä¸Šä¸‹æ–‡å¤åˆ¶** - ä¸€é”®å¤åˆ¶ç›¸å¯¹è·¯å¾„ã€è¡Œå·èŒƒå›´ä¸ä»£ç ç‰‡æ®µï¼Œä¾¿äºæ²Ÿé€šåä½œ
- **è·¨å¹³å°** - å…¨å¹³å°å…¼å®¹

### ğŸ¯ ä½¿ç”¨åœºæ™¯

- **è°ƒè¯•å¤æ‚é€»è¾‘** - å¯è§†åŒ–æ‰§è¡Œæµç¨‹ï¼Œè‡ªåŠ¨è¿½è¸ªä½ç½®å˜åŒ–
- **ä»£ç å®¡æŸ¥** - é€šè¿‡å¯¼å‡º/å¯¼å…¥ä¸å›¢é˜Ÿåˆ†äº«æ‰§è¡Œè·¯å¾„
- **ç¼–å†™æ–‡æ¡£** - é€šè¿‡ç»“æ„åŒ–æ–‡æœ¬è®°å½•æ‰§è¡Œè·¯å¾„
- **å­¦ä¹ ä»£ç ** - äº¤äº’å¼å¯¼èˆªç†è§£å¤æ‚ä»£ç åº“
- **ä»£ç é‡æ„** - æ™ºèƒ½ä½ç½®æ›´æ–°è¿½è¸ªä»£ç å˜åŒ–
- **å¤šåœºæ™¯æ¢ç´¢** - ä½¿ç”¨æ ‘åˆ†å‰æ¢ç´¢ä¸åŒæ‰§è¡Œè·¯å¾„

---

## English

### ğŸ’¡ The Problem

Have you encountered these challenges while reading complex code?

- ğŸ“‚ **Scattered Code Context**: A single feature implementation spread across multiple files, requiring constant jumping to understand the complete flow
- ğŸ” **Unclear Execution Paths**: During debugging, wondering "where is this function called from?" requires global searches and repetitive navigation
- ğŸ“ **Difficult to Record and Share**: Explaining complex logic to colleagues requires screenshots + text descriptions, which is inefficient
- ğŸ”„ **Lost Context After Refactoring**: Previously recorded locations become invalid after refactoring, requiring re-discovery

**Code Path Marker lets you bookmark code paths like adding bookmarks**:

âœ… Select any **code snippet, file, or folder** anytime to mark as a node
âœ… Organize code execution relationships through **Parent, Child, and Bro (sibling) nodes**
âœ… Visualize complete execution flow with **interactive tree views**
âœ… **Automatically track code locations** with intelligent position updates after refactoring
âœ… **Export/Import** functionality to easily share code paths with your team

> Unify scattered execution context from your codebase into a single view, making code reading and debugging efficient and intuitive.

**Note**: The extension is still in beta; its APIs, documentation, and data structures may change frequently. Feedback on issues and suggestions for improvement are welcome.

<p align="center">
  <img src="docs/assets/demos.png" alt="Code Path Marker demo preview" width="720">
</p>

### ğŸš€ Quick Start

#### ğŸ“¦ Installation

1. **From VS Code Marketplace** (Recommended):
   - Open VS Code
   - Go to Extensions panel (Ctrl+Shift+X / Cmd+Shift+X)
   - Search for "Code Path Marker"
   - Click **Install**

2. **From Command Line**:
   ```bash
   code --install-extension Nita.codepath-extension
   ```

#### ğŸ“Œ Real-World Example

**Scenario: Understanding an HTTP Request Flow**

```typescript
// src/routes/userRoutes.ts
router.post('/api/users', createUser);  // ğŸ‘ˆ 1. Select this line, right-click "Mark as New Root Node"

// src/controllers/userController.ts
export async function createUser(req, res) {  // ğŸ‘ˆ 2. Select function name, mark as "Child Node"
  const userData = await validateUserData(req.body);
  const user = await userService.createUser(userData);  // ğŸ‘ˆ 3. Select this line, mark as "Child Node"
  res.json(user);
}

// src/services/userService.ts
export async function createUser(data) {  // ğŸ‘ˆ 4. Select function name, mark as "Child Node"
  const hashedPassword = await hashPassword(data.password);  // ğŸ‘ˆ 5. Select this call, mark as "Child Node"
  return await db.users.create({ ...data, password: hashedPassword });
}

// src/utils/crypto.ts
export async function hashPassword(password) {  // ğŸ‘ˆ 6. Select function definition, mark as "Child Node"
  return bcrypt.hash(password, 10);
}
```

**Generated Visual Path:**
```
ğŸŒ² [Graph] User Registration Flow
â”œâ”€ ğŸ“ POST /api/users (userRoutes.ts:15)
   â””â”€ ğŸ“ createUser controller (userController.ts:23)
      â””â”€ ğŸ“ createUser service (userService.ts:45)
         â””â”€ ğŸ“ hashPassword encryption (crypto.ts:12)
            â””â”€ ğŸ“ bcrypt.hash call (crypto.ts:13)
```

**Result**: The complete call chain from route â†’ controller â†’ service â†’ utility function is crystal clear!

#### âš¡ Quick Actions

1. **Select Code** â†’ Highlight any code snippet in your editor
2. **Right-click Menu** â†’ Choose "Code Path" â†’ "Mark as New Node"
3. **Build Path** â†’ Continue marking other code, select Parent/Child/Bro to establish relationships
4. **View Tree** â†’ Click the Code Path icon in the status bar to view the complete path tree

### ğŸ“– Documentation

- **[ğŸ“š User Guide](docs/README-EN.md)** - Complete usage instructions
- **[ğŸ› ï¸ Developer Guide](docs/CONTRIBUTING-EN.md)** - Development and contribution guide
- **[ğŸ“‹ API Reference](docs/API-EN.md)** - Technical API documentation
- **[ğŸ”§ Configuration](docs/CONFIGURATION-EN.md)** - Settings and customization
- **[ğŸŒ Interactive Docs](docs/index.html)** - Multi-language documentation portal
- **[ğŸ“ Learning Guide](docs/LEARNING-GUIDE-EN.md)** - In-depth guide for beginners

### âš¡ Key Features

- **Interactive Node Marking** from selected code with unified "Code Path" submenu
- **Text Visualization** with instant refresh and hierarchical view
- **Multiple Graph Management** with quick status bar menu
- **Line Content Popup Editor** - Open auto-wrapping editor popup via lightbulb or context menu for multi-line editing with preserved line numbers
- **Lightbulb Quick Actions** - Access both the ğŸª§ Line Content Popup Editor and ğŸ“‹ Copy Code Context directly from the editor lightbulb (Quick Fix) menu to quickly edit or copy sharable code context with file paths and line ranges
- **Smart Navigation** with fuzzy matching and location tracking
- **Auto Location Update** - Intelligent code tracking with multi-strategy search
- **Tree Fork Support** - Track multiple execution paths for the same code
- **Export/Import** for team collaboration with auto-switch
- **Node Editing** with real-time validation and preview update
- **File Explorer Integration** - Mark files/folders as nodes, preview and share graphs
- **Node Operations** - Copy, paste, cut, move up/down with custom preview menu
- **Copy Code Context** - Copy relative file paths, line ranges, and selected snippets for quick sharing
- **File & Folder Backup Management** - Quickly back up selected files/folders from the explorer or status bar menu to `.codepath/file-backups`, keep only the latest backup per resource, restore from the latest backup, or clear all backups with one click
- **Cross-platform** compatibility

### ğŸ¯ Use Cases

- **Debug Complex Logic** - Visualize execution flow with automatic location tracking
- **Code Review** - Share execution paths with team via export/import
- **Documentation** - Capture execution flows with structured text export
- **Learning** - Understand complex codebases with interactive navigation
- **Refactoring** - Track code changes with intelligent location updates
- **Multiple Scenarios** - Use tree forks to explore different execution paths

---

<div align="center">

### ğŸŒŸ Star this project if you find it helpful!

**[Report Issues](https://github.com/your-org/codepath-extension/issues) | [Contribute](CONTRIBUTING.md) | [License](LICENSE)**

</div>

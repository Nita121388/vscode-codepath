# 自动更新节点位置 - 快速参考

## 🎯 一句话说明

当代码位置变化时，点击"OK"按钮即可自动更新节点位置。

## 📋 使用步骤

1. **点击节点** → 导航到代码
2. **看到提示** → "Code location may have changed: Code found at line X (moved Y lines)"
3. **点击OK** → 自动更新位置
4. **看到确认** → "Node location updated successfully"

## 🔍 搜索策略

| 策略 | 说明 | 优先级 |
|------|------|--------|
| 精确匹配 | 代码哈希完全相同 | 🔴 最高 |
| 邻近搜索 | 原位置±20行 | 🟠 高 |
| 全文搜索 | 搜索整个文件 | 🟡 中 |
| 模糊匹配 | 相似度>80% | 🟢 低 |

## 📊 置信度

| 级别 | 说明 | 操作建议 |
|------|------|----------|
| ✅ Exact | 完全匹配 | 放心更新 |
| 🟢 High | 高置信度 | 建议更新 |
| 🟡 Medium | 中等置信度 | 检查后更新 |
| 🟠 Low | 低置信度 | 谨慎更新 |
| ❌ Failed | 未找到 | 手动处理 |

## ⚡ 快捷操作

```
点击节点 → 看到提示 → 按 Enter (OK) → 完成
```

## 🛠️ 技术参数

- **搜索范围**: ±20行（邻近）→ 全文件
- **相似度阈值**: 80%
- **哈希算法**: SHA-256（前16位）
- **距离算法**: Levenshtein

## 💡 最佳实践

✅ **推荐**
- 及时更新位置
- 验证更新结果
- 定期检查所有节点

❌ **避免**
- 长期忽略提示
- 重构时删除节点
- 不验证就更新

## 🔧 故障排除

| 问题 | 原因 | 解决方案 |
|------|------|----------|
| 找不到代码 | 代码被删除 | 手动更新或删除节点 |
| 位置不对 | 代码大幅修改 | 手动编辑节点 |
| 更新失败 | 权限或文件问题 | 检查文件访问权限 |

## 📚 相关文档

- [详细指南](./AUTO_UPDATE_LOCATION_GUIDE.md)
- [技术文档](../AUTO_UPDATE_NODE_LOCATION.md)
- [实现总结](../AUTO_UPDATE_LOCATION_SUMMARY.md)

## 🎓 示例场景

### 场景1：添加代码
```typescript
// 原来在第10行
function hello() { }

// 添加注释后在第12行
// 系统提示：moved 2 lines
```

### 场景2：移动函数
```typescript
// 函数从文件顶部移到底部
// 系统提示：Code found at line 150 (moved 140 lines)
```

### 场景3：重构代码
```typescript
// 代码被重构但逻辑相似
// 系统使用模糊匹配找到新位置
// 置信度：Medium
```

## 🚀 快速命令

| 操作 | 快捷键/命令 |
|------|-------------|
| 导航到节点 | 点击节点 |
| 确认更新 | Enter 或点击 OK |
| 取消更新 | Esc 或点击 Dismiss |
| 手动编辑 | 右键 → Edit Node |

## 📞 获取帮助

遇到问题？
1. 查看[用户指南](./AUTO_UPDATE_LOCATION_GUIDE.md)
2. 查看[常见问题](./AUTO_UPDATE_LOCATION_GUIDE.md#常见问题)
3. 提交Issue
4. 查看日志输出

---

**提示**: 这个功能会让你的节点始终指向正确的代码位置，即使代码经常变化！
